<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pig latin</title>
    <script type="text/javascript" src="https://dartpad.dev/inject_embed.dart.js" defer></script>
    <style>
        .dartpad-embed>* {
            width: 100%;
        }

        iframe {
            border: 1px solid #bfbfbf;
            width: 100%;
            height: 600px;
            margin-bottom: 40px;
            margin-top: 40px;
        }
    </style>
</head>

<body>
    <h1>Armstrong number</h1>
    <p>
        An Armstrong number is a number that is the sum of its own digits each raised to the power of the number of
        digits.

        For example:

        9 is an Armstrong number, because 9 = 9^1 = 9
        10 is not an Armstrong number, because 10 != 1^2 + 0^2 = 1
        153 is an Armstrong number, because: 153 = 1^3 + 5^3 + 3^3 = 1 + 125 + 27 = 153
        154 is not an Armstrong number, because: 154 != 1^3 + 5^3 + 4^3 = 1 + 125 + 64 = 190
        Write some code to determine whether a number is an Armstrong number.
    </p>

    <p>Dart excercise with tests</p>
    <pre>
            <code class="language-run-dartpad:mode-dart">
{$ begin main.dart $}
class ArmstrongNumbers {
    // Is an armstrong number or not?
    bool isArmstrongNumber(String value) {
        return true;
    }
}

{$ end main.dart $}

{$ begin test.dart $}
void main() {
    try {
        final armstrongNumbers = ArmstrongNumbers();

        group('ArmstrongNumbers', () {
          test('Zero is an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('0');
            expect(result, equals(true));
          });
      
          test('Single-digit numbers are Armstrong numbers', () {
            final result = armstrongNumbers.isArmstrongNumber('5');
            expect(result, equals(true));
          });
      
          test('There are no two-digit Armstrong numbers', () {
            final result = armstrongNumbers.isArmstrongNumber('10');
            expect(result, equals(false));
          });
      
          test('Three-digit number that is an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('153');
            expect(result, equals(true));
          });
      
          test('Three-digit number that is not an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('100');
            expect(result, equals(false));
          });
      
          test('Four-digit number that is an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('9474');
            expect(result, equals(true));
          });
      
          test('Four-digit number that is not an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('9475');
            expect(result, equals(false));
          });
      
          test('Seven-digit number that is an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('9926315');
            expect(result, equals(true));
          });
      
          test('Seven-digit number that is not an Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('9926314');
            expect(result, equals(false));
          });
      
          test('Armstrong number containing seven zeroes', () {
            final result = armstrongNumbers.isArmstrongNumber('186709961001538790100634132976990');
            expect(result, equals(true));
          });
      
          test('The largest and last Armstrong number', () {
            final result = armstrongNumbers.isArmstrongNumber('115132219018763992565095597973971522401');
            expect(result, equals(true));
          });
        });

        _result(true, ['All tests passed!']);
    } on PiglatinException catch (e) {
        final strings = [
            for (PiglatinException? pge = e; pge != null; pge = pge.prev) 
                pge.message
        ];
        _result(false, strings);
    }    
}

class PiglatinException implements Exception {
    final PiglatinException? prev;
    final String message;
    PiglatinException(this.message, this.prev);
}

void group(String message, Function f) {
    try {
        f.call();
        print('Group passed: $message');
    } on PiglatinException catch (e) {
        throw PiglatinException('Failed group: $message', e); 
    }
}

void test(String message, Function f) {
    try {
        f.call();
        print(' > Test passed: $message');
    } on PiglatinException catch (e) {
        throw PiglatinException('Failed test: $message', e); 
    }
}

bool equals(bool a) => a;

void expect(bool a, bool b) {
    if (a != b) {
        throw PiglatinException('Bool "$a" is not equal to bool "$b"', null); 
    }
}
{$ end test.dart $}
            </code>
        </pre>
</body>

</html>